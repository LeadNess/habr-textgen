function autocomplete(a,b){function c(){let c,d,e,g,h=j.value;if(i(),!h)return!1;o=-1,c=document.createElement("DIV"),c.setAttribute("id","autocomplete-list-words"),c.setAttribute("class","autocomplete-items"),k.appendChild(c),d=document.createElement("DIV"),d.setAttribute("id","autocomplete-list-phrases"),d.setAttribute("class","autocomplete-items"),l.appendChild(d);let n=parseInt(m.value);for(let f=0;f<b.length;f++){let j=h.split(" "),k=j[j.length-1],l=b[f].split(" "),m=l[0],o="";for(let a=0;a<(l.length-1<n?l.length-1:n);a++)o+=l[a]+" ";(o.substr(0,k.length).toUpperCase()===k.toUpperCase()||(k.length=0))&&(e=document.createElement("DIV"),e.className="form-control",e.style.cursor="pointer",e.innerHTML="<strong>"+m.substr(0,k.length)+"</strong>",e.innerHTML+=m.substr(k.length),e.innerHTML+="<input type='hidden' value='"+m+"'>",e.addEventListener("click",function(){a.value="";for(let b=0;b<j.length-1;b++)a.value+=j[b]+" ";let b=this.getElementsByTagName("input")[0].value;a.value+=b.substr(0,b.length-1),i()}),c.appendChild(e),g=document.createElement("DIV"),g.className="form-control",g.style.cursor="pointer",g.innerHTML="<strong>"+o.substr(0,k.length)+"</strong>",g.innerHTML+=o.substr(k.length),g.innerHTML+="<input type='hidden' value='"+o+"'>",g.addEventListener("click",function(){a.value="";for(let b=0;b<j.length-1;b++)a.value+=j[b]+" ";let b=this.getElementsByTagName("input")[0].value;a.value+=b.substr(0,b.length-1),i()}),d.appendChild(g))}f()}function d(){let a=j.value.toString();if(" "===a[a.length-1]){console.log("Updating T9...");let c=a.split(" ");if(1<c.length&&c[c.length-2]!==q){let a=parseInt(n.value),d=[];for(let b=0;b<(a<c.length?a:c.length);b++)d.push(c[c.length-(b+2)]);q="";for(let a=d.length-1;0<=a;a--)q+=d[a]+" ";console.log("T9 phrase: ",q.substr(0,q.length-1).toLowerCase()),console.log("T9 words count: ",a),$.post("/t9",{beginning:q.substr(0,q.length-1).toLowerCase(),first_words_count:a,phrase_length:m.value}).done(function(a){b=a.words})}}}function f(){k.classList.toggle("hide-element"),l.classList.toggle("hide-element"),console.log(),k.classList.contains("hide-element")?(console.log("phrases"),p=l.children[0]):(console.log("words"),p=k.children[0]),p&&(p=p.getElementsByTagName("div")),console.log("changeActiveItems: ",p),console.log(l.children[0]),console.log(k.children[0])}function g(a){return!!a&&void(h(a),o>=a.length&&(o=0),0>o&&(o=a.length-1),console.log("Before adding active style: ",a[o].innerHTML),a[o].classList.add("autocomplete-active"),a[o].style.backgroundColor="DodgerBlue",console.log("After adding active style: ",a[o].innerHTML),console.log("currentFocus: ",o))}function h(a){for(let b=0;b<a.length;b++)a[b].classList.remove("autocomplete-active"),a[b].style.backgroundColor="white"}function i(){const a=document.getElementsByClassName("autocomplete-items");for(let b of a)b.remove();if(a)for(let b of a)b.remove()}const j=document.getElementById("text"),k=document.getElementById("t9-words"),l=document.getElementById("t9-phrases"),m=document.getElementById("phrase-len"),n=document.getElementById("first-words");let o,p,q="";a.addEventListener("input",function(){c()}),m.onkeyup=m.onchange=()=>{c()},a.addEventListener("input",function(){d()}),n.onkeyup=n.onchange=()=>{d()},a.addEventListener("keydown",function(a){p===void 0&&(f(),o=p.length-1,h(p)),39===a.keyCode?(f(),o=p.length-1,h(p)):40===a.keyCode?(o++,console.log("40: ",p),console.log(l.children[0]),console.log(k.children[0]),g(p)):38===a.keyCode?(o--,console.log("38: ",p),console.log(l.children[0]),console.log(k.children[0]),g(p)):13===a.keyCode?(a.preventDefault(),-1<o&&p&&p[o].click()):220===a.keyCode&&console.log(b)}),a.addEventListener("keyup",function(){0<this.scrollTop&&(this.style.height=this.scrollHeight+"px")}),document.addEventListener("click",function(a){i(a.target)})}